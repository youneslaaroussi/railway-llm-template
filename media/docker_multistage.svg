<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: DockerMultistage Pages: 1 -->
<svg width="674pt" height="214pt"
 viewBox="0.00 0.00 674.00 214.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 210)">
<title>DockerMultistage</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-210 670,-210 670,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_server</title>
<polygon fill="#f8f9fa" stroke="#f8f9fa" points="8,-8 8,-99 658,-99 658,-8 8,-8"/>
<text text-anchor="middle" x="333" y="-85.4" font-family="Inter, Helvetica, Arial" font-size="12.00">server/Dockerfile</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_site</title>
<polygon fill="#f8f9fa" stroke="#f8f9fa" points="27.5,-107 27.5,-198 634,-198 634,-107 27.5,-107"/>
<text text-anchor="middle" x="330.75" y="-184.4" font-family="Inter, Helvetica, Arial" font-size="12.00">site/Dockerfile</text>
</g>
<!-- s_deps -->
<g id="node1" class="node">
<title>s_deps</title>
<polygon fill="none" stroke="black" points="177,-69.5 16,-69.5 16,-16.5 177,-16.5 177,-69.5"/>
<text text-anchor="middle" x="96.5" y="-54.3" font-family="Times,serif" font-size="14.00">deps</text>
<text text-anchor="middle" x="96.5" y="-39.3" font-family="Times,serif" font-size="14.00">node:22&#45;alpine</text>
<text text-anchor="middle" x="96.5" y="-24.3" font-family="Times,serif" font-size="14.00">`npm ci &#45;&#45;omit=dev`</text>
</g>
<!-- s_build -->
<g id="node2" class="node">
<title>s_build</title>
<polygon fill="none" stroke="black" points="411,-69.5 213,-69.5 213,-16.5 411,-16.5 411,-69.5"/>
<text text-anchor="middle" x="312" y="-54.3" font-family="Times,serif" font-size="14.00">build</text>
<text text-anchor="middle" x="312" y="-39.3" font-family="Times,serif" font-size="14.00">copy src + node_modules</text>
<text text-anchor="middle" x="312" y="-24.3" font-family="Times,serif" font-size="14.00">`npm run build`</text>
</g>
<!-- s_deps&#45;&gt;s_build -->
<g id="edge1" class="edge">
<title>s_deps&#45;&gt;s_build</title>
<path fill="none" stroke="black" d="M177.3,-43C185.65,-43 194.22,-43 202.81,-43"/>
<polygon fill="black" stroke="black" points="202.89,-46.5 212.89,-43 202.89,-39.5 202.89,-46.5"/>
</g>
<!-- s_prod -->
<g id="node3" class="node">
<title>s_prod</title>
<polygon fill="none" stroke="black" points="650,-69.5 447,-69.5 447,-16.5 650,-16.5 650,-69.5"/>
<text text-anchor="middle" x="548.5" y="-54.3" font-family="Times,serif" font-size="14.00">prod</text>
<text text-anchor="middle" x="548.5" y="-39.3" font-family="Times,serif" font-size="14.00">copy dist + node_modules</text>
<text text-anchor="middle" x="548.5" y="-24.3" font-family="Times,serif" font-size="14.00">`node dist/main`</text>
</g>
<!-- s_build&#45;&gt;s_prod -->
<g id="edge2" class="edge">
<title>s_build&#45;&gt;s_prod</title>
<path fill="none" stroke="black" d="M411.09,-43C419.57,-43 428.19,-43 436.76,-43"/>
<polygon fill="black" stroke="black" points="436.79,-46.5 446.79,-43 436.79,-39.5 436.79,-46.5"/>
</g>
<!-- w_deps -->
<g id="node4" class="node">
<title>w_deps</title>
<polygon fill="none" stroke="black" points="157.5,-168.5 35.5,-168.5 35.5,-115.5 157.5,-115.5 157.5,-168.5"/>
<text text-anchor="middle" x="96.5" y="-153.3" font-family="Times,serif" font-size="14.00">deps</text>
<text text-anchor="middle" x="96.5" y="-138.3" font-family="Times,serif" font-size="14.00">node:22&#45;alpine</text>
<text text-anchor="middle" x="96.5" y="-123.3" font-family="Times,serif" font-size="14.00">`npm ci`</text>
</g>
<!-- w_build -->
<g id="node5" class="node">
<title>w_build</title>
<polygon fill="none" stroke="black" points="411,-168.5 213,-168.5 213,-115.5 411,-115.5 411,-168.5"/>
<text text-anchor="middle" x="312" y="-153.3" font-family="Times,serif" font-size="14.00">build</text>
<text text-anchor="middle" x="312" y="-138.3" font-family="Times,serif" font-size="14.00">copy src + node_modules</text>
<text text-anchor="middle" x="312" y="-123.3" font-family="Times,serif" font-size="14.00">`npm run build`</text>
</g>
<!-- w_deps&#45;&gt;w_build -->
<g id="edge3" class="edge">
<title>w_deps&#45;&gt;w_build</title>
<path fill="none" stroke="black" d="M157.54,-142C171.6,-142 187.01,-142 202.47,-142"/>
<polygon fill="black" stroke="black" points="202.63,-145.5 212.63,-142 202.63,-138.5 202.63,-145.5"/>
</g>
<!-- w_prod -->
<g id="node6" class="node">
<title>w_prod</title>
<polygon fill="none" stroke="black" points="626,-168.5 471,-168.5 471,-115.5 626,-115.5 626,-168.5"/>
<text text-anchor="middle" x="548.5" y="-153.3" font-family="Times,serif" font-size="14.00">prod</text>
<text text-anchor="middle" x="548.5" y="-138.3" font-family="Times,serif" font-size="14.00">copy .next + public</text>
<text text-anchor="middle" x="548.5" y="-123.3" font-family="Times,serif" font-size="14.00">`npm start`</text>
</g>
<!-- w_build&#45;&gt;w_prod -->
<g id="edge4" class="edge">
<title>w_build&#45;&gt;w_prod</title>
<path fill="none" stroke="black" d="M411.09,-142C427.46,-142 444.34,-142 460.41,-142"/>
<polygon fill="black" stroke="black" points="460.84,-145.5 470.84,-142 460.84,-138.5 460.84,-145.5"/>
</g>
</g>
</svg>

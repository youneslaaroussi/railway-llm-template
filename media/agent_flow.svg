<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: AgentFlow Pages: 1 -->
<svg width="2015pt" height="183pt"
 viewBox="0.00 0.00 2015.05 183.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 179)">
<title>AgentFlow</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-179 2011.05,-179 2011.05,4 -4,4"/>
<!-- client -->
<g id="node1" class="node">
<title>client</title>
<polygon fill="none" stroke="black" points="315.26,-121 64.44,-121 -0.09,-45 250.74,-45 315.26,-121"/>
<text text-anchor="middle" x="157.59" y="-86.8" font-family="Times,serif" font-size="14.00">Client request</text>
<text text-anchor="middle" x="157.59" y="-71.8" font-family="Times,serif" font-size="14.00">/agent/chat/stream</text>
</g>
<!-- controller -->
<g id="node2" class="node">
<title>controller</title>
<polygon fill="none" stroke="black" points="482.17,-101 351.17,-101 351.17,-65 482.17,-65 482.17,-101"/>
<text text-anchor="middle" x="416.67" y="-79.3" font-family="Times,serif" font-size="14.00">AgentController</text>
</g>
<!-- client&#45;&gt;controller -->
<g id="edge1" class="edge">
<title>client&#45;&gt;controller</title>
<path fill="none" stroke="black" d="M283.36,-83C303.03,-83 322.81,-83 340.86,-83"/>
<polygon fill="black" stroke="black" points="340.99,-86.5 350.99,-83 340.99,-79.5 340.99,-86.5"/>
</g>
<!-- service -->
<g id="node3" class="node">
<title>service</title>
<polygon fill="none" stroke="black" points="818.17,-101 518.17,-101 518.17,-65 818.17,-65 818.17,-101"/>
<text text-anchor="middle" x="668.17" y="-79.3" font-family="Times,serif" font-size="14.00">AgentService.processRequest{Stream}</text>
</g>
<!-- controller&#45;&gt;service -->
<g id="edge2" class="edge">
<title>controller&#45;&gt;service</title>
<path fill="none" stroke="black" d="M482.25,-83C490.43,-83 499.07,-83 507.96,-83"/>
<polygon fill="black" stroke="black" points="508.09,-86.5 518.09,-83 508.09,-79.5 508.09,-86.5"/>
</g>
<!-- planner -->
<g id="node4" class="node">
<title>planner</title>
<polygon fill="none" stroke="black" points="1027.17,-101 854.17,-101 854.17,-65 1027.17,-65 1027.17,-101"/>
<text text-anchor="middle" x="940.67" y="-79.3" font-family="Times,serif" font-size="14.00">Planner (small model)</text>
</g>
<!-- service&#45;&gt;planner -->
<g id="edge3" class="edge">
<title>service&#45;&gt;planner</title>
<path fill="none" stroke="black" d="M818.27,-83C826.98,-83 835.61,-83 844.01,-83"/>
<polygon fill="black" stroke="black" points="844.15,-86.5 854.15,-83 844.15,-79.5 844.15,-86.5"/>
</g>
<!-- decision -->
<g id="node5" class="node">
<title>decision</title>
<polygon fill="none" stroke="black" points="1194.61,-101 1063.23,-83 1194.61,-65 1325.99,-83 1194.61,-101"/>
<text text-anchor="middle" x="1194.61" y="-79.3" font-family="Times,serif" font-size="14.00">kind == &#39;simple&#39;?</text>
</g>
<!-- planner&#45;&gt;decision -->
<g id="edge4" class="edge">
<title>planner&#45;&gt;decision</title>
<path fill="none" stroke="black" d="M1027.32,-83C1035.62,-83 1044.19,-83 1052.85,-83"/>
<polygon fill="black" stroke="black" points="1053.05,-86.5 1063.05,-83 1053.05,-79.5 1053.05,-86.5"/>
</g>
<!-- simple -->
<g id="node6" class="node">
<title>simple</title>
<path fill="none" stroke="black" d="M1514.05,-137C1514.05,-137 1394.05,-137 1394.05,-137 1388.05,-137 1382.05,-131 1382.05,-125 1382.05,-125 1382.05,-111 1382.05,-111 1382.05,-105 1388.05,-99 1394.05,-99 1394.05,-99 1514.05,-99 1514.05,-99 1520.05,-99 1526.05,-105 1526.05,-111 1526.05,-111 1526.05,-125 1526.05,-125 1526.05,-131 1520.05,-137 1514.05,-137"/>
<text text-anchor="middle" x="1454.05" y="-121.8" font-family="Times,serif" font-size="14.00">Direct completion</text>
<text text-anchor="middle" x="1454.05" y="-106.8" font-family="Times,serif" font-size="14.00">(content_stream)</text>
</g>
<!-- decision&#45;&gt;simple -->
<g id="edge5" class="edge">
<title>decision&#45;&gt;simple</title>
<path fill="none" stroke="black" d="M1261.24,-91.92C1294.73,-96.48 1335.79,-102.06 1371.32,-106.89"/>
<polygon fill="black" stroke="black" points="1371.28,-110.42 1381.66,-108.29 1372.23,-103.48 1371.28,-110.42"/>
</g>
<!-- executor -->
<g id="node7" class="node">
<title>executor</title>
<polygon fill="none" stroke="black" points="1546.05,-74 1362.05,-74 1362.05,-38 1546.05,-38 1546.05,-74"/>
<text text-anchor="middle" x="1454.05" y="-52.3" font-family="Times,serif" font-size="14.00">Executor (tool&#45;enabled)</text>
</g>
<!-- decision&#45;&gt;executor -->
<g id="edge6" class="edge">
<title>decision&#45;&gt;executor</title>
<path fill="none" stroke="black" d="M1269.73,-75.23C1295.26,-72.55 1324.31,-69.5 1351.64,-66.64"/>
<polygon fill="black" stroke="black" points="1352.04,-70.11 1361.62,-65.59 1351.31,-63.15 1352.04,-70.11"/>
</g>
<!-- events -->
<g id="node10" class="node">
<title>events</title>
<polygon fill="none" stroke="black" points="1719.05,-175 1582.05,-175 1582.05,-77 1725.05,-77 1725.05,-169 1719.05,-175"/>
<polyline fill="none" stroke="black" points="1719.05,-175 1719.05,-169 "/>
<polyline fill="none" stroke="black" points="1725.05,-169 1719.05,-169 "/>
<text text-anchor="middle" x="1653.55" y="-159.8" font-family="Times,serif" font-size="14.00">Streamed events:</text>
<text text-anchor="middle" x="1653.55" y="-144.8" font-family="Times,serif" font-size="14.00">content_stream</text>
<text text-anchor="middle" x="1653.55" y="-129.8" font-family="Times,serif" font-size="14.00">tool_start</text>
<text text-anchor="middle" x="1653.55" y="-114.8" font-family="Times,serif" font-size="14.00">tool_complete</text>
<text text-anchor="middle" x="1653.55" y="-99.8" font-family="Times,serif" font-size="14.00">heartbeat</text>
<text text-anchor="middle" x="1653.55" y="-84.8" font-family="Times,serif" font-size="14.00">complete</text>
</g>
<!-- simple&#45;&gt;events -->
<g id="edge11" class="edge">
<title>simple&#45;&gt;events</title>
<path fill="none" stroke="black" d="M1526.07,-120.88C1540.81,-121.47 1556.44,-122.11 1571.51,-122.72"/>
<polygon fill="black" stroke="black" points="1571.69,-126.23 1581.83,-123.14 1571.98,-119.23 1571.69,-126.23"/>
</g>
<!-- tool_registry -->
<g id="node8" class="node">
<title>tool_registry</title>
<polygon fill="none" stroke="black" points="1707.05,-59 1600.05,-59 1600.05,-23 1707.05,-23 1707.05,-59"/>
<text text-anchor="middle" x="1653.55" y="-37.3" font-family="Times,serif" font-size="14.00">ToolRegistry</text>
</g>
<!-- executor&#45;&gt;tool_registry -->
<g id="edge7" class="edge">
<title>executor&#45;&gt;tool_registry</title>
<path fill="none" stroke="black" d="M1546.29,-49.07C1560.94,-47.96 1575.83,-46.83 1589.63,-45.78"/>
<polygon fill="black" stroke="black" points="1590.24,-49.24 1599.95,-45 1589.71,-42.26 1590.24,-49.24"/>
</g>
<!-- executor&#45;&gt;events -->
<g id="edge10" class="edge">
<title>executor&#45;&gt;events</title>
<path fill="none" stroke="black" d="M1505.91,-74.03C1526.11,-81.19 1549.84,-89.6 1572.26,-97.54"/>
<polygon fill="black" stroke="black" points="1571.17,-100.87 1581.77,-100.91 1573.51,-94.27 1571.17,-100.87"/>
</g>
<!-- tool -->
<g id="node9" class="node">
<title>tool</title>
<path fill="none" stroke="black" d="M1995.05,-36C1995.05,-36 1773.05,-36 1773.05,-36 1767.05,-36 1761.05,-30 1761.05,-24 1761.05,-24 1761.05,-12 1761.05,-12 1761.05,-6 1767.05,0 1773.05,0 1773.05,0 1995.05,0 1995.05,0 2001.05,0 2007.05,-6 2007.05,-12 2007.05,-12 2007.05,-24 2007.05,-24 2007.05,-30 2001.05,-36 1995.05,-36"/>
<text text-anchor="middle" x="1884.05" y="-14.3" font-family="Times,serif" font-size="14.00">Tool (memory / currency / math)</text>
</g>
<!-- tool_registry&#45;&gt;tool -->
<g id="edge8" class="edge">
<title>tool_registry&#45;&gt;tool</title>
<path fill="none" stroke="black" d="M1707.26,-35.69C1720.56,-34.36 1735.44,-32.86 1750.77,-31.31"/>
<polygon fill="black" stroke="black" points="1751.3,-34.78 1760.9,-30.3 1750.6,-27.81 1751.3,-34.78"/>
</g>
<!-- tool&#45;&gt;executor -->
<g id="edge9" class="edge">
<title>tool&#45;&gt;executor</title>
<path fill="none" stroke="black" d="M1760.8,-6.86C1705.84,-4.29 1640.36,-4.61 1582.05,-14 1556.87,-18.06 1529.93,-26.36 1507.36,-34.52"/>
<polygon fill="black" stroke="black" points="1506.14,-31.24 1497.98,-38 1508.57,-37.81 1506.14,-31.24"/>
</g>
<!-- done -->
<g id="node11" class="node">
<title>done</title>
<polygon fill="none" stroke="black" points="1926.55,-168.5 1841.55,-168.5 1841.55,-83.5 1926.55,-83.5 1926.55,-168.5"/>
<polyline fill="none" stroke="black" points="1853.55,-168.5 1841.55,-156.5 "/>
<polyline fill="none" stroke="black" points="1841.55,-95.5 1853.55,-83.5 "/>
<polyline fill="none" stroke="black" points="1914.55,-83.5 1926.55,-95.5 "/>
<polyline fill="none" stroke="black" points="1926.55,-156.5 1914.55,-168.5 "/>
<text text-anchor="middle" x="1884.05" y="-122.3" font-family="Times,serif" font-size="14.00">Complete</text>
</g>
<!-- events&#45;&gt;done -->
<g id="edge12" class="edge">
<title>events&#45;&gt;done</title>
<path fill="none" stroke="black" d="M1725.29,-126C1759.44,-126 1799.68,-126 1830.98,-126"/>
<polygon fill="black" stroke="black" points="1831.23,-129.5 1841.23,-126 1831.23,-122.5 1831.23,-129.5"/>
</g>
</g>
</svg>
